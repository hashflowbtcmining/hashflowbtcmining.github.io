<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HashFlow BTC Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
:root{
  --bg:#0b0f1a; --card:#131a2e; --accent:#f2a900; --text:#fff;
  --ok:#00ff99; --warn:#ffcc66;
}
[data-theme="light"]{
  --bg:#f2f3f7; --card:#fff; --text:#000;
}
body{margin:0;font-family:Arial,sans-serif;background:var(--bg);color:var(--text);}
.card{max-width:95%;margin:16px auto;padding:18px;border-radius:12px;background:var(--card);}
h2{color:var(--accent);text-align:center;margin-bottom:10px;}
button,input,textarea{width:100%;padding:10px;border:none;border-radius:6px;margin-top:8px;font-size:14px;}
button{background:var(--accent);font-weight:bold;cursor:pointer;}
.hidden{display:none;}
canvas{width:100%;height:140px;border-radius:8px;margin-top:10px;background:#0b0f1a;display:block;}
.tx{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid #222;font-size:13px;}
.badge{padding:2px 6px;border-radius:6px;font-size:11px;}
.pending{background:var(--warn);color:#000;}
.confirmed{background:var(--ok);color:#000;}
.progress{height:6px;background:#1b2340;border-radius:6px;margin-top:4px;overflow:hidden;}
.progress div{height:100%;background:var(--ok);width:0%;transition:width 0.5s;}
.toast{position:fixed;top:10px;right:10px;padding:10px 14px;background:var(--accent);color:#000;border-radius:8px;z-index:9999;opacity:0;transition:opacity 0.5s;}
#topbar{display:none;position:fixed;top:0;left:0;right:0;background:#10162b;padding:10px 16px;z-index:999;display:flex;justify-content:space-between;align-items:center;}
#usernameDisplay{font-weight:bold;}
#menuBtn{font-size:22px;cursor:pointer;}
#menu{display:none;position:fixed;top:50px;right:10px;background:var(--card);padding:10px;border-radius:10px;z-index:1000;}
#menu div{padding:8px;cursor:pointer;}
.stats{display:flex;justify-content:space-around;flex-wrap:wrap;}
.stats div{background:var(--bg);padding:10px;margin:5px;border-radius:8px;}
.btc-box{background:var(--bg);padding:10px;border-radius:8px;margin-top:10px;word-break:break-all;text-align:center;}
.tx-container{max-height:260px;overflow:hidden;background:var(--bg);padding:10px;border-radius:8px;font-size:13px;position:relative;}
.screenshot-img{max-width:100%;margin-top:10px;border-radius:8px;border:1px solid #222;}
</style>
</head>
<body data-theme="dark">

<!-- TOP BAR -->
<div id="topbar">
  <div id="menuBtn">â˜°</div>
  <div id="usernameDisplay"></div>
  <div></div>
</div>
<div id="menu">
  <div onclick="showSection('withdrawals')">Live Withdrawal Group</div>
  <div onclick="showSection('support')">Contact Admin</div>
  <div onclick="toggleTheme()">Toggle Theme</div>
  <div onclick="logout()">Log Out</div>
</div>

<!-- LOGIN -->
<div class="card" id="loginCard">
  <h2>Secure Login</h2>
  <div id="step1">
    <input id="contactInput" placeholder="Email or phone number">
    <button onclick="sendCode()">Get verification code</button>
  </div>
  <div id="step2" class="hidden">
    <p style="text-align:center;color:var(--accent)">Your code: <b id="generatedCode"></b></p>
    <p style="text-align:center">Code expires in <span id="countdown">60</span>s</p>
    <input id="codeInput" placeholder="Enter verification code">
    <button onclick="verifyCode()">Submit</button>
    <button onclick="sendCode()">Resend code</button>
  </div>
  <div id="step3" class="hidden">
    <input id="usernameInput" placeholder="Create a username">
    <button onclick="finishLogin()">Continue</button>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden">

  <!-- BTC Deposit -->
  <div class="card">
    <h2>BTC Deposit Address</h2>
    <div class="btc-box" id="btcAddress">bc1qkwxcdnal9pu6qjs07j88s88987x04k3hsasyav</div>
    <button onclick="copyAddress()">Copy Address</button>
    <div style="text-align:center;margin-top:10px;">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=bc1qkwxcdnal9pu6qjs07j88s88987x04k3hsasyav">
    </div>
  </div>

  <!-- Mining Dashboard -->
  <div class="card">
    <h2>Mining Dashboard</h2>
    <p style="text-align:center;color:var(--accent);">Earn 30% daily return</p>
    <div class="btc" id="balance">0.00000000 BTC</div>
    <canvas id="chart"></canvas>
    <div class="stats">
      <div>Hashrate: 120 TH/s</div>
      <div>Blocks: <span id="blocks">0</span></div>
      <div>Uptime: <span id="uptime">0h 0m</span></div>
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="card">
    <h2>Recent Activity</h2>
    <div class="tx-container" id="txs"></div>
  </div>

  <!-- Investment Plans -->
  <div class="card" id="plansContainer"></div>

  <!-- Live Testimonials -->
  <div class="card" id="liveTestimonials">
    <h2>Live Testimonials</h2>
    <div id="testimonialFeed"></div>
  </div>

  <!-- Live Withdrawal Group -->
  <div class="card hidden" id="withdrawals">
    <h2>Live Withdrawal Group</h2>
    <div id="feed"></div>
    <div id="stats" class="stats"></div>
  </div>

  <!-- Support Inbox -->
  <div class="card hidden" id="support">
    <h2>Support Inbox</h2>
    <textarea id="supportMsg" placeholder="Write message..." style="width:100%;height:80px;"></textarea>
    <button onclick="sendSupport()">Send</button>
    <div id="supportReply"></div>
  </div>

</div>

<!-- TOAST -->
<div id="toast" class="toast"></div>

<script>
// ===== TOP MENU =====
menuBtn.onclick = ()=>menu.style.display = menu.style.display==='block'?'none':'block';
function showSection(id){
  document.querySelectorAll('.card').forEach(c=>{
    if(c.id==='loginCard') return;
    if(['withdrawals','support'].includes(c.id)) c.classList.add('hidden');
  });
  document.getElementById(id).classList.remove('hidden');
  menu.style.display='none';
}
function toggleTheme(){
  const t = document.body.dataset.theme==='dark'?'light':'dark';
  document.body.dataset.theme = t;
  localStorage.setItem('theme',t);
}
if(localStorage.getItem('theme')) document.body.dataset.theme = localStorage.getItem('theme');
function logout(){localStorage.removeItem('verifiedUser');location.reload();}

// ===== OTP LOGIN =====
let generatedCode="", timer=null, timeLeft=60, userContact="";
function sendCode(){
  userContact=document.getElementById('contactInput').value.trim();
  if(!userContact){alert("Enter email or phone");return;}
  generatedCode=Math.floor(100000+Math.random()*900000).toString();
  document.getElementById('generatedCode').innerText=generatedCode;
  document.getElementById('step1').classList.add('hidden');
  document.getElementById('step2').classList.remove('hidden');
  clearInterval(timer); timeLeft=60; document.getElementById('countdown').innerText=timeLeft;
  timer=setInterval(()=>{
    timeLeft--; document.getElementById('countdown').innerText=timeLeft;
    if(timeLeft<=0){ clearInterval(timer); alert("Code expired. Resend."); }
  },1000);
}
function verifyCode(){
  if(document.getElementById('codeInput').value.trim()!==generatedCode){alert("Invalid code");return;}
  document.getElementById('step2').classList.add('hidden');
  document.getElementById('step3').classList.remove('hidden');
}
function finishLogin(){
  const username=document.getElementById('usernameInput').value.trim();
  if(!username){alert("Create a username");return;}
  localStorage.setItem('verifiedUser',JSON.stringify({contact:userContact,username:username}));
  enterDashboard(username);
}
function enterDashboard(username){
  document.getElementById('loginCard').style.display='none';
  document.getElementById('dashboard').classList.remove('hidden');
  document.getElementById('topbar').style.display='flex';
  document.getElementById('usernameDisplay').innerText=username;
}

// Auto-login if previously verified
const saved=localStorage.getItem('verifiedUser');
if(saved){
  const u=JSON.parse(saved);
  enterDashboard(u.username);
}

// ===== DASHBOARD MINING & ACTIVITIES =====
let balance=0, blocks=0, minutes=0;
const txs=document.getElementById("txs");
let rate=0.00000008, paused=false;
const canvas=document.getElementById("chart");
const ctx=canvas.getContext("2d"); let points=[0];
function drawChart(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const w=canvas.width/50;
  ctx.beginPath();
  let lastY=canvas.height-points[0]*canvas.height/0.01; ctx.moveTo(0,lastY);
  for(let i=1;i<points.length;i++){
    let y=canvas.height-points[i]*canvas.height/0.01; ctx.lineTo(i*w,y);
  }
  ctx.strokeStyle="#f2a900"; ctx.lineWidth=2; ctx.stroke();
  const last=points[points.length-1]||0; points.push(last+rate);
  if(points.length>50) points.shift();
}
setInterval(drawChart,500);

setInterval(()=>{
  blocks+=Math.floor(Math.random()*2);
  minutes++;
  document.getElementById("blocks").innerText = blocks;
  document.getElementById("uptime").innerText = Math.floor(minutes/60)+"h "+(minutes%60)+"m";
},60000);

setInterval(()=>{
  if(!paused){balance+=rate; document.getElementById("balance").innerText = balance.toFixed(8)+" BTC";}
},1000);

function addFakeTx(){
  const div=document.createElement("div"); div.className="tx";
  const val=(Math.random()*0.0004+0.00002).toFixed(8);
  const status=Math.random()>0.5?"Completed":"Pending";
  div.innerHTML=`<span>+${val} BTC</span><span class="${status==="Completed"?"green":"yellow"}">${status}</span>`;
  txs.prepend(div); if(txs.children.length>500) txs.removeChild(txs.lastChild);
}
setInterval(addFakeTx,1500);

function copyAddress(){
  navigator.clipboard.writeText(document.getElementById('btcAddress').innerText).then(()=>alert('BTC address copied!'));
}
function sendSupport(){ alert("Message sent!"); }

// ===== INVESTMENT PLANS =====
const plans=[
  {name:"Plan A",profit:"30%",min:200,max:599},
  {name:"Plan B",profit:"45%",min:600,max:1000},
  {name:"Plan C",profit:"60%",min:1100,max:2000},
  {name:"Plan D",profit:"75%",min:2000,max:4999},
  {name:"Plan E",profit:"80%",min:5000,max:9999},
  {name:"Plan F",profit:"85%",min:10000,max:"Unlimited"}
];
function initPlans(){
  const container=document.getElementById("plansContainer"); container.innerHTML="";
  plans.forEach((plan,index)=>{
    const div=document.createElement("div"); div.className="plan"; div.id="plan"+index;
    div.innerHTML=`
      <h3>${plan.name}</h3>
      <p>Daily Profit: ${plan.profit}</p>
      <p>Minimum Investment: $${plan.min}</p>
      <p>Maximum Investment: ${plan.max}</p>
      <div class="pay-section" id="paySection${index}">
        <p>Send BTC to:</p>
        <div class="btc-box" id="planBtc${index}">bc1qkwxcdnal9pu6qjs07j88s88987x04k3hsasyav</div>
        <button onclick="copyPlanAddress(${index})">Copy Address</button>
        <div style="text-align:center;margin-top:10px;">
          <img src="https://api.qrserver.com/v1/create-qr-code/?size=140x140&data=bc1qkwxcdnal9pu6qjs07j88s88987x04k3hsasyav">
        </div>
        <p>Upload screenshot of payment:</p>
        <input type="file" id="screenshot${index}" accept="image/*">
        <button id="paidBtn${index}">Paid</button>
        <img id="preview${index}" class="screenshot-img" style="display:none;">
        <p class="countdown" id="countdown${index}">Withdrawal available in 3d 0h 0m 0s</p>
      </div>
      <button id="investBtn${index}">Invest Now</button>
    `;
    container.appendChild(div);
    const investBtn=document.getElementById("investBtn"+index);
    const paySection=document.getElementById("paySection"+index);
    const screenshotInput=document.getElementById("screenshot"+index);
    const preview=document.getElementById("preview"+index);
    const countdown=document.getElementById("countdown"+index);
    const paidBtn=document.getElementById("paidBtn"+index);
    investBtn.onclick=()=>{paySection.style.display="block"; investBtn.style.display="none";}
    paidBtn.onclick=()=>{
      const file=screenshotInput.files[0]; if(!file){alert("Upload screenshot"); return;}
      const reader=new FileReader();
      reader.onload=function(evt){
        if(localStorage.getItem('verifiedUser').includes("evilpaid666@gmail.com")){
          preview.src=evt.target.result; preview.style.display="block";
          localStorage.setItem("plan"+index+"_screenshot",evt.target.result);
          localStorage.setItem("plan"+index+"_confirmed","true");
          localStorage.setItem("plan"+index+"_start",Date.now());
        }
        alert(plan.name+" payment confirmed! Countdown started.");
      }
      reader.readAsDataURL(file);
    }
  });
}
initPlans();
function copyPlanAddress(index){navigator.clipboard.writeText(document.getElementById("planBtc"+index).innerText).then(()=>alert("BTC address copied!"));}

// ===== LIVE TESTIMONIALS =====
const testimonialFeed=document.getElementById("testimonialFeed");
let testimonialSet=new Set();
const testimonialPool=[
  "I have successfully withdrawn 0.001 BTC",
  "Funds credited successfully",
  "Withdrawal confirmed instantly",
  "My BTC arrived safely",
  "Happy to receive my funds",
  "0.002 BTC received, very smooth",
  "Fast and reliable withdrawal",
  "Great experience withdrawing",
  "I am glad I received mine",
  "My withdrawal was successful"
];
function addTestimonial(){
  if(testimonialSet.size===testimonialPool.length) testimonialSet.clear();
  let t; do{t=testimonialPool[Math.floor(Math.random()*testimonialPool.length)];}while(testimonialSet.has(t));
  testimonialSet.add(t);
  const div=document.createElement("div"); div.className="tx"; div.innerHTML=`<span>${t}</span>`;
  testimonialFeed.prepend(div); if(testimonialFeed.children.length>50) testimonialFeed.removeChild(testimonialFeed.lastChild);
}
setInterval(addTestimonial,3000);

// ===== LIVE WITHDRAWAL GROUP + PROGRESS + TOAST =====
const withdrawalFeed=document.getElementById("feed");
const statsPanel=document.getElementById("stats");
function addWithdrawal(){
  const val=(Math.random()*0.01+0.0005).toFixed(6);
  const div=document.createElement("div"); div.className="tx";
  div.innerHTML=`<span>Withdrawal confirmed: ${val} BTC</span><div class="progress"><div></div></div>`;
  withdrawalFeed.prepend(div);
  const bar=div.querySelector('div div'); setTimeout(()=>{bar.style.width='100%';},100);
  showToast(`New withdrawal: ${val} BTC`);
  if(withdrawalFeed.children.length>300) withdrawalFeed.removeChild(withdrawalFeed.lastChild);
}
setInterval(addWithdrawal,5000);

// ===== SIMULATED MEMBER JOIN + TOAST =====
function simulateMembers(){ showToast("New member joined"); }
setInterval(simulate
