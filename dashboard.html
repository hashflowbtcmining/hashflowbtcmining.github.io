<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HashFlow BTC Mining Plans</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;padding:0;font-family:Arial,sans-serif;background:#0b0f1a;color:white;}
.card{max-width:95%;margin:15px auto;padding:20px;border-radius:12px;background:#131a2e;}
h2{color:#f2a900;text-align:center;}
.plan{border:1px solid #222;border-radius:10px;padding:15px;margin:10px 0;text-align:center;}
.plan h3{color:#f2a900;margin-bottom:10px;}
.plan p{margin:5px 0;}
button{background:#f2a900;border:none;padding:10px 16px;border-radius:6px;font-weight:bold;cursor:pointer;margin-top:5px;display:block;width:100%;}
input[type=file]{margin-top:10px;display:block;width:100%;}
.locked{opacity:0.7;cursor:not-allowed;}
.btc-box{background:#0b0f1a;padding:10px;border-radius:8px;margin-top:10px;word-break:break-all;text-align:center;}
.countdown{color:#f2a900;font-weight:bold;margin-top:5px;}
.screenshot-img{max-width:100%;margin-top:10px;border-radius:8px;border:1px solid #222;}
</style>
</head>
<body>

<h2 style="margin-top:10px;">Investment Plans</h2>

<div class="card" id="plansContainer"></div>

<script>
// ===== Define plans =====
const plans = [
  {name:"Plan A", profit:"30%", min:200, max:599},
  {name:"Plan B", profit:"45%", min:600, max:1000},
  {name:"Plan C", profit:"60%", min:1100, max:2000},
  {name:"Plan D", profit:"75%", min:2000, max:4999},
  {name:"Plan E", profit:"80%", min:5000, max:9999},
  {name:"Plan F", profit:"85%", min:10000, max:"Unlimited"}
];

const container = document.getElementById("plansContainer");

// ===== Helper: format money =====
function formatMoney(val){return typeof val==="number"?"$"+val:val;}

plans.forEach((plan, index)=>{
  const div = document.createElement("div");
  div.className="plan";
  div.id="plan"+index;

  div.innerHTML=`
    <h3>${plan.name}</h3>
    <p>Daily Profit: ${plan.profit}</p>
    <p>Minimum Investment: ${formatMoney(plan.min)}</p>
    <p>Maximum Investment: ${formatMoney(plan.max)}</p>
    <input type="file" id="screenshot${index}" accept="image/*" style="display:none;">
    <img id="preview${index}" class="screenshot-img" style="display:none;">
    <p class="countdown" id="countdown${index}">Withdrawal available in 3d 0h 0m 0s</p>
    <button id="investBtn${index}">Invest Now</button>
  `;
  container.appendChild(div);

  const investBtn = document.getElementById("investBtn"+index);
  const screenshotInput = document.getElementById("screenshot"+index);
  const preview = document.getElementById("preview"+index);
  const countdown = document.getElementById("countdown"+index);

  let paymentConfirmed = localStorage.getItem("plan"+index+"_confirmed")==="true";
  let startTime = paymentConfirmed ? parseInt(localStorage.getItem("plan"+index+"_start")) : null;
  
  // Show previous screenshot if exists
  const savedImg = localStorage.getItem("plan"+index+"_screenshot");
  if(savedImg){
    preview.src = savedImg;
    preview.style.display = "block";
  }

  // Countdown function
  function updateCountdown(){
    if(!paymentConfirmed){
      countdown.innerText = "Withdrawal available in 3d 0h 0m 0s";
      return;
    }
    const now = Date.now();
    const elapsed = now - startTime;
    const remaining = 3*24*60*60*1000 - elapsed;
    if(remaining <=0){
      countdown.innerText = "Withdrawal available now!";
    } else {
      const d = Math.floor(remaining/(1000*60*60*24));
      const h = Math.floor((remaining%(1000*60*60*24))/(1000*60*60));
      const m = Math.floor((remaining%(1000*60*60))/(1000*60));
      const s = Math.floor((remaining%(1000*60))/1000);
      countdown.innerText = `Withdrawal available in ${d}d ${h}h ${m}m ${s}s`;
    }
  }
  setInterval(updateCountdown,1000);
  updateCountdown();

  // Button click → open file upload
  investBtn.onclick = ()=>{
    screenshotInput.click();
  }

  // Screenshot uploaded → confirm payment
  screenshotInput.addEventListener("change", function(e){
    const file = e.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = function(evt){
      preview.src = evt.target.result;
      preview.style.display = "block";
      // Confirm payment
      paymentConfirmed = true;
      startTime = Date.now();
      localStorage.setItem("plan"+index+"_confirmed","true");
      localStorage.setItem("plan"+index+"_start", startTime);
      localStorage.setItem("plan"+index+"_screenshot", evt.target.result);
      alert(plan.name + " payment confirmed! Withdrawal countdown started.");
    }
    reader.readAsDataURL(file);
  });
});
</script>
</body>
</html>
