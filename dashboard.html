<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HashFlow Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#0b0f1a;
  --card:#131a2e;
  --accent:#f2a900;
  --text:#ffffff;
}
[data-theme="light"]{
  --bg:#f2f3f7;
  --card:#ffffff;
  --text:#000000;
}
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
}
.card{
  background:var(--card);
  max-width:420px;
  margin:80px auto;
  padding:20px;
  border-radius:12px;
}
input,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:6px;
  border:none;
  font-size:15px;
}
button{
  background:var(--accent);
  font-weight:bold;
  cursor:pointer;
}
.hidden{display:none}

/* TOP BAR */
#topbar{
  display:none;
  position:fixed;
  top:0;left:0;right:0;
  background:#10162b;
  padding:12px 16px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  z-index:999;
}
#usernameDisplay{
  font-weight:bold;
  font-size:16px;
}
#menuBtn{
  font-size:22px;
  cursor:pointer;
}
#menu{
  display:none;
  position:fixed;
  top:56px;
  right:10px;
  background:var(--card);
  border-radius:10px;
  padding:10px;
  z-index:1000;
}
#menu div{
  padding:8px;
  cursor:pointer;
}

/* DASHBOARD */
#dashboard{
  margin-top:80px;
  padding:16px;
}
.section{
  background:var(--card);
  padding:16px;
  border-radius:12px;
  margin-bottom:16px;
  max-width:900px;
  margin-left:auto;
  margin-right:auto;
}
.center{text-align:center}
.small{font-size:13px;opacity:.8}
</style>
</head>

<body data-theme="dark">

<!-- TOP BAR -->
<div id="topbar">
  <div id="menuBtn">â˜°</div>
  <div id="usernameDisplay"></div>
  <div></div>
</div>

<div id="menu">
  <div onclick="showSection('withdrawals')">Live Withdrawal Group</div>
  <div onclick="showSection('support')">Contact Admin</div>
  <div onclick="toggleTheme()">Toggle Theme</div>
  <div onclick="logout()">Log Out</div>
</div>

<!-- LOGIN -->
<div class="card" id="loginCard">
  <h2 class="center">Secure Login</h2>

  <!-- STEP 1 -->
  <div id="step1">
    <input id="contactInput" placeholder="Email or phone number">
    <button onclick="sendCode()">Get verification code</button>
  </div>

  <!-- STEP 2 -->
  <div id="step2" class="hidden">
    <p class="center small">
      Your code: <b id="generatedCode"></b><br>
      Code expires in <span id="countdown">60</span>s
    </p>
    <input id="codeInput" placeholder="Enter verification code">
    <button onclick="verifyCode()">Submit</button>
    <button onclick="sendCode()">Resend code</button>
  </div>

  <!-- STEP 3 -->
  <div id="step3" class="hidden">
    <input id="usernameInput" placeholder="Create a username">
    <button onclick="finishLogin()">Continue</button>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden">

  <div class="section center">
    <h2>Mining Dashboard</h2>
    <p class="small">Live mining statistics</p>
    <div style="font-size:28px;margin-top:10px">0.00000000 BTC</div>
  </div>

  <div class="section center" id="withdrawals">
    <h2>Live Withdrawal Group</h2>
    <p class="small">Real-time withdrawal activity</p>
  </div>

  <div class="section center hidden" id="support">
    <h2>Contact Support</h2>
    <textarea style="width:100%;height:80px;border-radius:6px"></textarea>
    <button>Send Message</button>
  </div>

</div>

<script>
/* MENU */
menuBtn.onclick=()=>menu.style.display=menu.style.display==='block'?'none':'block';

/* THEME */
function toggleTheme(){
  const t=document.body.dataset.theme==='dark'?'light':'dark';
  document.body.dataset.theme=t;
  localStorage.setItem('theme',t);
}
if(localStorage.getItem('theme')){
  document.body.dataset.theme=localStorage.getItem('theme');
}

/* LOGIN LOGIC */
let code="", timer=null, timeLeft=60, userContact="";

function sendCode(){
  userContact=document.getElementById('contactInput').value.trim();
  if(!userContact){alert("Enter email or phone");return;}

  code=Math.floor(100000+Math.random()*900000).toString();
  document.getElementById('generatedCode').innerText=code;

  document.getElementById('step1').classList.add('hidden');
  document.getElementById('step2').classList.remove('hidden');

  clearInterval(timer);
  timeLeft=60;
  document.getElementById('countdown').innerText=timeLeft;

  timer=setInterval(()=>{
    timeLeft--;
    document.getElementById('countdown').innerText=timeLeft;
    if(timeLeft<=0){
      clearInterval(timer);
      alert("Code expired. Please resend.");
    }
  },1000);
}

function verifyCode(){
  if(document.getElementById('codeInput').value.trim()!==code){
    alert("Invalid code");
    return;
  }
  document.getElementById('step2').classList.add('hidden');
  document.getElementById('step3').classList.remove('hidden');
}

function finishLogin(){
  const username=document.getElementById('usernameInput').value.trim();
  if(!username){alert("Create a username");return;}

  localStorage.setItem('verifiedUser',JSON.stringify({
    contact:userContact,
    username:username
  }));

  enterDashboard(username);
}

/* AUTO LOGIN */
const saved=localStorage.getItem('verifiedUser');
if(saved){
  const u=JSON.parse(saved);
  enterDashboard(u.username);
}

function enterDashboard(username){
  document.getElementById('loginCard').style.display='none';
  document.getElementById('dashboard').classList.remove('hidden');
  document.getElementById('topbar').style.display='flex';
  document.getElementById('usernameDisplay').innerText=username;
}

/* NAV */
function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('hidden'));
  if(id==='support'){
    document.getElementById('support').classList.remove('hidden');
  }
  menu.style.display='none';
}

/* LOGOUT */
function logout(){
  localStorage.removeItem('verifiedUser');
  location.reload();
}
</script>

</body>
</html>
